<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## Hooks

**Extends Config**

Hook implementation class.

### $env

Internal environment reference.

Type: [object][1]&lt;[string][2], any>

### $ctx

Internal context reference.

Type: [object][1]&lt;[string][2], any>

## bind(env, ctx)

Sets internal references for the environment and context.

### Parameters

-   `env` **[object][1]&lt;[string][2], any>** Wok-cli environment
-   `ctx` **[object][1]&lt;[string][2], any>** A context object

Returns **[Hooks][3]** This method is chainable

## get(id)

Returns an hook map. If the hook does not exist it will be set.

### Parameters

-   `id` **[string][2]** 

Returns **[Map][4]** The hook map

## set(id)

Sets an hook map.

### Parameters

-   `id` **[string][2]** 

Returns **[Hooks][3]** This method is chainable

## delete(id, name?)

Deletes an hook map or a specific hook by name.

### Parameters

-   `id` **[string][2]** Hook map id
-   `name` **[string][2]?** Hook name

Returns **[Hooks][3]** This method is chainable

## callWith(id, initial, params?)

Executes an hook with an initial value and optional parameters.

### Parameters

-   `id` **[string][2]** Hook map id
-   `initial` **any** Hook initial value
-   `params` **...any?** Optional parameters

### Examples

```javascript
hooks.tap('demo', 'add', (n) => n + 1)
hooks.tap('demo', 'multiply', (n) => n * 2)

hooks.callWith('demo', 1) === 4 // (1 + 1) * 2
```

Returns **lazypipe** 

## call(id, params?)

Executes an hook with a [lazypipe][5] as initial value and optional parameters.

The resulting lazypipe will be run right away and the resulting stream returned.

### Parameters

-   `id` **[string][2]** Hook map id
-   `params` **...any?** Optional parameters

### Examples

```javascript
const { src, dest } = require('gulp');
const concat = require('gulp-concat');

hooks.tap('scripts', 'concat', (lazypipe) => lazypipe.pipe(concat));

exports.scripts = function scripts() {
 return src(['src/*.js'])
 .pipe(hooks.call('scripts'))
 .pipe(dest('dist'))
}
```

Returns **[stream][6]** 

## tap(id, name, fn)

Enqueue a new function inside a hook.

Every function will receive a value from the previous one and should return a new one.

### Parameters

-   `id` **[string][2]** Hook name
-   `name` **[string][2]** Hook function name
-   `fn` **[function][7]** Hook function

### Examples

```javascript
hooks.tap('demo', 'add', (n = 1) => n + 1) // n == 1
hooks.tap('demo', 'multiply', (n) => n * 2) // n == 2

hooks.callWith('demo', 1) // returns 4

hooks.delete('demo', 'multiply')

hooks.callWith('demo', 1) // returns 2
```

Returns **[Hooks][3]** This method is chainable

## count(id)

Returns the number of hook functions currently enqueued for a given hook.

### Parameters

-   `id` **[string][2]** Hook map id

Returns **[number][8]** 

## tapBefore(id, name, fn, before?)

Like `Hooks#tap` but prepends the function instead of enqueuing it.

Accepts a 4th argument to specify a function before which to append the new one.

### Parameters

-   `id` **[string][2]** Hook map id
-   `name` **[string][2]** function name
-   `fn` **[function][7]** hook function
-   `before` **[string][2]?** optional function name to which prepend the new function

### Examples

```javascript
// prepend before all
hooks.tap('demo', 'add', (n) => n + 1)
hooks.tap('demo', 'multiply', (n) => n * 2)
hooks.tapBefore('demo', 'substract', (n) => n - 1)

hooks.callWith('demo', 1) // returns 2 (1 - 1 + 1) * 2

// prepend before a spcific function
hooks.tap('demo', 'add', (n) => n + 1)
hooks.tap('demo', 'multiply', (n) => n * 2)
hooks.tapBefore('demo', 'substract', (n) => n - 2, 'multiply')

hooks.callWith('demo', 1) // returns 0 (1 + 1 - 2) * 2
```

Returns **[Hooks][3]** This method is chainable

[1]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[2]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[3]: #hooks

[4]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Map

[5]: https://github.com/OverZealous/lazypipe

[6]: https://nodejs.org/api/stream.html

[7]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[8]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number
